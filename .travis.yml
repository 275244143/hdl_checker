language: python
python:
  - "2.7"

before_script:
    - "git submodule update"
    - "mkdir -p ~/ghdl"
    - "cd ~/ghdl"
    - "if [ ! -f ghdl.tar.gz ]; then wget http://downloads.sourceforge.net/project/ghdl-updates/Builds/ghdl-0.33/ghdl-0.33-x86_64-linux.tgz -O ghdl.tar.gz; fi"
    - "tar zxvf ghdl.tar.gz"
    - "cd -"
    - "git clean -fdx"
    - "git submodule foreach git clean -fdx"

# command to install dependencies
install: "pip install -r requirements.txt"
# command to run tests
script:
  - "./run_tests.py -vv --log-capture"
  - "cat tests.log"
after_success:
  - "coverage combine"
  - "coverage html"
  - "codecov"
cache:
  directories:
  - ~/ghdl/

